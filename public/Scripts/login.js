(()=>{var u="https://nextcloud.clarusch.de",d=u;var f=()=>({initNextcloudLogin(){let e=new XMLHttpRequest;e.onreadystatechange=function(){this.readyState==4&&this.status==200&&(console.log(e.response),window.nextcloudLoginData=JSON.parse(e.response))},e.open("POST",d+"/index.php/login/v2"),e.send()},openNextcloudLogin(){window.open(window.nextcloudLoginData.login,"_blank");let e=p(window.nextcloudLoginData.poll.endpoint,window.nextcloudLoginData.poll.token).then(function(){console.log(e),console.log("sucess?")}).catch(function(){console.log("i don't know")})}});function p(e,o,n=1e4,t=100){var c=Number(new Date)+n,s=function(i,a){var l=r(e,o);l?i(l):Number(new Date)<c?setTimeout(s,t,i,a):a(new Error("timed out for "+r+": "+arguments))};return new Promise(s)}function r(e,o){let n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4&&this.status==200)return console.log("ready and 200"),JSON.parse(n.response);console.log("NC not rdy")},n.open("POST",e),n.setRequestHeader("token",o);let t="token="+o;n.send(t)}})();
//# sourceMappingURL=login.js.map
